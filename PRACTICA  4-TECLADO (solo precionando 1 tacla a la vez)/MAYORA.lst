MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;===========================================================
                      00002 ; TECLADO
Warning[205]: Found directive in column 1. (list)
                      00003 list p=16f873a 
Warning[205]: Found directive in column 1. (include)
                      00004 include <p16f873a.inc> 
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F873A processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00526         LIST
Warning[205]: Found directive in column 1. (__CONFIG)
2007   3F71           00005 __CONFIG _FOSC_XT & _WDTE_OFF & _PWRTE_ON & _BOREN_ON & _LVP_OFF & _CPD_OFF & _WRT_OFF & _CP_OFF
                      00006 
                      00007 ;===========================================================
                      00008 ;Librerias 
                      00009                 CBLOCK 0Ch
                      00010                 endc 
                      00011 ;==============================================================
                      00012 ;variables 
                      00013 
Warning[207]: Found label after column 1. (CONT1)
  00000020            00014         CONT1 equ 20h                   ;indica cuantos numeros se han guardado
Warning[207]: Found label after column 1. (CONT2)
  00000021            00015         CONT2 equ 21h                   ;indica cuaos numeros guardados se han mostrado
Warning[207]: Found label after column 1. (CONT3)
  00000022            00016         CONT3 equ 22h                   ;indica que precione numeral    
Warning[207]: Found label after column 1. (CONT4)
  00000023            00017         CONT4 equ 23h                   ;indicador para ordenar numeros
Warning[207]: Found label after column 1. (CONT5)
  00000024            00018         CONT5 equ 24h                   ;indicador para ordenar numeros
Warning[207]: Found label after column 1. (CONT6)
  00000024            00019         CONT6 equ 24h                   ;indicador para ordenar numeros
Warning[207]: Found label after column 1. (CUENTA)
  00000007            00020         CUENTA equ 07h                  ;indica cuantos numeros se van a ordenar
Warning[207]: Found label after column 1. (LISTA)
  00000040            00021         LISTA equ 40h                   ;se guarda momentaneamene el digito             
Warning[207]: Found label after column 1. (LISTA1)
  00000041            00022         LISTA1 equ 41h                  ;se guarda el digito 1 de la cedula
Warning[207]: Found label after column 1. (LISTA2)
  00000042            00023         LISTA2 equ 42h                  ;se guarda el digito 2 de la cedula     
Warning[207]: Found label after column 1. (LISTA3)
  00000043            00024         LISTA3 equ 43h                  ;...
Warning[207]: Found label after column 1. (LISTA4)
  00000044            00025         LISTA4 equ 44h
Warning[207]: Found label after column 1. (LISTA5)
  00000045            00026         LISTA5 equ 45h
Warning[207]: Found label after column 1. (LISTA6)
  00000046            00027         LISTA6 equ 46h
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[207]: Found label after column 1. (LISTA7)
  00000047            00028         LISTA7 equ 47h
Warning[207]: Found label after column 1. (LISTA8)
  00000048            00029         LISTA8 equ 48h
                      00030 
                      00031 ;===========================================================
                      00032 ;REDIRECCIONAMIENTO: redireciona el programa dependiendo si se 
                      00033 ;activó un reset o una interrupcion externa
                      00034 
0000                  00035 RESET   
0000                  00036         ORG 0
0000   289F           00037         GOTO INICIO                             ;me dirijo al inicio del programa
0004                  00038         ORG 4
0004   2805           00039         GOTO LISTO                              ;voy a la rutina de interrupcion
                      00040 
                      00041 ;=================================================================
                      00042 ;RUTINA DE INTERRUPCION: se activa solo si se preciona asterisco y 
                      00043 ;se encarga de mostrar los numeros ya guardadados
                      00044 
0005                  00045 LISTO
0005   120B           00046         BCF INTCON,INTE                 ;deshabilito interruocuiones externas "RB0"
0006   21E1           00047         call Retardo_2ms                ;espero un instante
0007   0820           00048         MOVF CONT1,w                    ;
0008   3C08           00049         SUBLW 08H                               ;
0009   1D03           00050         BTFSS STATUS,Z                  ;si aun no he guardado los 8 numeros
000A   2810           00051         GOTO VOLVER                             ;regresr
000B   0822           00052         MOVF CONT3,w                    ;
000C   3C55           00053         SUBLW 55H                               ;
000D   1D03           00054         BTFSS STATUS,Z                  ;si aun no se a precionado numeral
000E   2810           00055         GOTO VOLVER                             ;regresr
000F   2969           00056         GOTO COMPROBAR2                 ;si ya lo hice mostrar uno de los números
                      00057 
0010                  00058 VOLVER
0010   108B           00059         BCF INTCON,INTF                 ;indico que ya se ejecuto la inerrupción
0011   160B           00060         BSF INTCON,INTE                 ;habilito interruocuiones externas "RB0"
0012   0009           00061         RETFIE                                  ;regreso
                      00062 
                      00063 ;=================================================================
                      00064 ;SUBRUTINA GRABADO: se ejecutara solo al haber introducido los 8
                      00065 ;digitos de la cedula, se trara de un bucle del que solo se saldra
                      00066 ;al precionar la tecla numeral
                      00067 
0013                  00068 GRABADO
0013   1387           00069         BCF PORTC,7                             ;me aceguro que RC7 este en nivel bajo
0014   1D07           00070         BTFSS PORTC,2                   ;solo si se preciono numeral                    
0015   2817           00071         GOTO MOSTRAR                    ;ir a mostrar
0016   2813           00072         GOTO GRABADO
                      00073 
                      00074 ;=================================================================
                      00075 ;SUBRUTINA MOSTRAR Y ACTIVO: se activa solo si ya se han guardado 
                      00076 ;los 8 digitos de la cedula y si se ha presiondo la tecla numeral,
                      00077 ;se encrga de avisarnos que ta se han guardado los 8 digitos al 
                      00078 ;enceder el LED activo y mostrar en el display un guion, solo se 
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00079 ;saldra de esta subrutina con una interupcion
                      00080 
0017                  00081 MOSTRAR 
0017   0820           00082         MOVF CONT1,w                            
0018   3C08           00083         SUBLW 08H
0019   1D03           00084         BTFSS STATUS,Z                  ;si aun no he guardado los 8 numeros
001A   28C1           00085         GOTO TECLADO                    ;esperar a que se precione otra tecla
001B   3055           00086         MOVLW 55H               
001C   00A2           00087         MOVWF CONT3                             ;indico que se preciono numeral
001D   2031           00088         CALL ORDENAR
001E   30FF           00089         MOVLW B'11111111'               
001F   0085           00090         MOVWF PORTA                             ;apagar Led grabando
0020   2821           00091         GOTO ACTIVO                             ;encener led activo
                      00092 
0021                  00093 ACTIVO
0021   1387           00094         BCF     PORTC,7                         ;me aceguro que RC7 este en nivel bajo
0022   0821           00095         MOVF CONT2,w                    ;
0023   3C08           00096         SUBLW 08H                               ;
0024   1903           00097         BTFSC STATUS,Z                  ;si ya guardade los 8 numeros
0025   29BA           00098         GOTO FIN                                ;finalizar el programa
0026   30FB           00099         MOVLW B'11111011'               ;sino enciendo led ativo
0027   0085           00100     MOVWF PORTA                         ;
0028   307F           00101         MOVLW B'01111111'               ;muestro un guion en el display
0029   0086           00102     MOVWF PORTB                         ;
002A   21F3           00103         CALL Retardo_2s                 ;espero un tiempo
002B   30FF           00104         MOVLW B'11111111'               ;apago led acivo
002C   0085           00105     MOVWF PORTA                         ;
002D   30FF           00106         MOVLW B'11111111'               ;muestro un guion en el display
002E   0086           00107     MOVWF PORTB                         ;
002F   21F3           00108         CALL Retardo_2s                 ;espero un tiempo
0030   2821           00109         goto ACTIVO                             ;repito
                      00110 
                      00111 
                      00112 ;=================================================================
                      00113 ;SUBRUTINA ORDENAR: una vez introducido los 8 numeros, esta subrutina 
                      00114 ;los ordenara de forma ascendente, se ordenaran un numero de CUENTA+1. 
                      00115 ;Por ejemplo como CUENTA es 7, se ordenan de menor a mayor 8 valores a 
                      00116 ;partir de la dirección 41h=LISTA1, luego de esto, convertira los 
                      00117 ;numeros ordenados  anteriormente en su equivalente 7 segmentos 
                      00118 
0031                  00119 ORDENAR 
0031   3007           00120                 MOVLW CUENTA            ;aviso cuantos nuemros voy a ordenar
0032   00A3           00121                 MOVWF CONT4                     ;lo muevo alontador 1
0033   3007           00122 BUCLE1  MOVLW CUENTA            ;aviso cuantos nuemros voy a ordenar
0034   00A4           00123                 MOVWF CONT5                     ;lo muevo a contador 2
0035   3048           00124                 MOVLW LISTA8            
0036   0084           00125                 MOVWF FSR                       ;apunto al comienzo de la lista
0037                  00126 BUCLE2
0037   203E           00127                 CALL ORDENADOS          ;llamo a ordenados
0038   0384           00128                 DECF FSR,1                      ;incremento el apuntador
Message[305]: Using default destination of 1 (file).
0039   0BA4           00129                 DECFSZ CONT5            ;indico que verifique 2 numeros
003A   2837           00130                 GOTO BUCLE2                     ;verifico los siguientes 2 numeros
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
003B   0BA3           00131                 DECFSZ CONT4            ;decrementamos el cotador
003C   2833           00132                 GOTO BUCLE1                     ;vuelvo a revisar la lista
003D   284C           00133                 GOTO CONVERTIR          ;si ya revise todo terminar
                      00134 
003E                  00135 ORDENADOS
003E   0800           00136                 MOVF INDF,W                     ;guardo w lo que este en la direccion del apuntador
003F   0384           00137                 DECF FSR,1                      ;decremento el apuntador
0040   0200           00138                 SUBWF INDF,W            ;resto el primer numero con el segundo
0041   1C03           00139                 BTFSS STATUS,C          ;elnumero es mayor o menor?
0042   284A           00140                 GOTO NOHACERNADA        ;si es menor no hacer nada
0043   0800           00141                 MOVF INDF,W                     ;si es mayor intercambiar numeros
0044   0A84           00142                 INCF FSR,1
0045   0680           00143                 XORWF INDF,F
0046   0600           00144                 XORWF INDF,W
0047   0680           00145                 XORWF INDF,F
0048   0384           00146                 DECF FSR,1                      
0049   0080           00147                 MOVWF INDF
                      00148 
004A                  00149 NOHACERNADA
004A   0A84           00150                 INCF FSR,1                      
004B   0008           00151                 RETURN                          ;revisar siguiente par de numeros
                      00152 
004C                  00153 CONVERTIR
004C   3041           00154                 MOVLW 41H
004D   0084           00155                 MOVWF FSR                       ;apunto al comienzo de la lista
004E   01A4           00156                 CLRF CONT6                      ;me aseguro que contador6=0
004F                  00157 VOLVER4
004F   0AA4           00158                 INCF CONT6,1            ;incremento el contador 6       
0050   2857           00159                 GOTO SIETESEG           ;convierto a 7 segmentos
0051                  00160 VOLVER3 
0051   0A84           00161                 INCF FSR,1                      ;apunto al siguiete numero              
0052   0824           00162                 MOVF CONT6,w            ;reviso el contador 6
0053   3C08           00163                 SUBLW 08H                       ;
0054   1903           00164                 BTFSC STATUS,Z          ;si aun no he guardado los 8 numeros
0055   0008           00165                 RETURN                          ;regresr
0056   284F           00166                 GOTO VOLVER4            ;si lo hice revisar el siguiente numero
                      00167         
0057                  00168 SIETESEG
0057   0800           00169                 MOVF INDF,W
0058   3C00           00170                 SUBLW 00H                       
0059   1903           00171                 BTFSC STATUS,Z                  
005A   2881           00172                 GOTO COD0                        
005B   0800           00173                 MOVF INDF,W
005C   3C01           00174                 SUBLW 01H                       
005D   1903           00175                 BTFSC STATUS,Z                  
005E   2884           00176                 GOTO COD1                       
005F   0800           00177                 MOVF INDF,W
0060   3C02           00178                 SUBLW 02H
0061   1903           00179                 BTFSC STATUS,Z                  
0062   2887           00180                 GOTO COD2                       
0063   0800           00181                 MOVF INDF,W
0064   3C03           00182                 SUBLW 03H
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0065   1903           00183                 BTFSC STATUS,Z                  
0066   288A           00184                 GOTO COD3
0067   0800           00185                 MOVF INDF,W
0068   3C04           00186                 SUBLW 04H
0069   1903           00187                 BTFSC STATUS,Z                  
006A   288D           00188                 GOTO COD4
006B   0800           00189                 MOVF INDF,W
006C   3C05           00190                 SUBLW 05H
006D   1903           00191                 BTFSC STATUS,Z                  
006E   2890           00192                 GOTO COD5
006F   0800           00193                 MOVF INDF,W
0070   3C06           00194                 SUBLW 06H
0071   1903           00195                 BTFSC STATUS,Z                  
0072   2893           00196                 GOTO COD6       
0073   0800           00197                 MOVF INDF,W
0074   3C07           00198                 SUBLW 07H
0075   1903           00199                 BTFSC STATUS,Z                  
0076   2896           00200                 GOTO COD7
0077   0800           00201                 MOVF INDF,W
0078   3C08           00202                 SUBLW 08H
0079   1903           00203                 BTFSC STATUS,Z                  
007A   2899           00204                 goto COD8
007B   0800           00205                 MOVF INDF,W
007C   3C09           00206                 SUBLW 09H
007D   1903           00207                 BTFSC STATUS,Z                  
007E   289C           00208                 goto COD9
007F   0800           00209                 MOVF INDF,W
0080   2857           00210                 GOTO SIETESEG
                      00211 
0081   3080           00212 COD0    movlw B'10000000'       ;muestro que se guardo el digito 1
0082   0080           00213                 MOVWF INDF
0083   2851           00214                 goto VOLVER3
0084   30F3           00215 COD1    movlw B'11110011'       ;muestro que se guardo el digito 1
0085   0080           00216                 MOVWF INDF
0086   2851           00217                 goto VOLVER3
0087   3048           00218 COD2    movlw B'01001000'       ;muestro que se guardo el digito 2
0088   0080           00219                 MOVWF INDF
0089   2851           00220                 goto VOLVER3
008A   3060           00221 COD3    movlw B'01100000'
008B   0080           00222                 MOVWF INDF
008C   2851           00223                 goto VOLVER3
008D   3033           00224 COD4    movlw B'00110011'
008E   0080           00225                 MOVWF INDF
008F   2851           00226                 goto VOLVER3
0090   3024           00227 COD5    movlw B'00100100'
0091   0080           00228                 MOVWF INDF
0092   2851           00229                 goto VOLVER3
0093   3004           00230 COD6    movlw B'00000100'
0094   0080           00231                 MOVWF INDF
0095   2851           00232                 goto VOLVER3
0096   30F0           00233 COD7    movlw B'11110000'
0097   0080           00234                 MOVWF INDF
0098   2851           00235                 goto VOLVER3
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0099   3000           00236 COD8    movlw B'00000000'
009A   0080           00237                 MOVWF INDF
009B   2851           00238                 goto VOLVER3    
009C   3020           00239 COD9    movlw B'00100000'
009D   0080           00240                 MOVWF INDF
009E   2851           00241                 goto VOLVER3
                      00242 
                      00243 
                      00244 ;==================================================================
                      00245 ;RUTINA DE INICIO: configura los puertos, pone a 0 los contadores Y
                      00246 ;entra en un bucle en el que solo saldra si se preciona el boton RESET
                      00247 
                      00248 
009F                  00249 INICIO
                      00250 
009F   1303           00251         BCF STATUS,RP1                  ;
00A0   1683           00252         BSF STATUS,RP0                  ;coloco en 1 el bit RP0 (seleccion banco 1)
00A1   3001           00253         MOVLW B'00000001'               ;configuro el puerto B
00A2   0086           00254     MOVWF PORTB                         ;todo salidas expeto RB0
00A3   300F           00255     MOVLW B'00001111'           ;configuro el puerto C
00A4   0087           00256     MOVWF PORTC                         ;mitad del puerto C entradas y mitad salidas
00A5   3006           00257     movlw 06h                           ;configuro el puerto A como entrada digital
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A6   009F           00258         movwf ADCON1                    ;
00A7   3001           00259         movlw B'00000001'               ;configuro el puerto A como salida
00A8   0085           00260         movwf PORTA                             ;RA0=ENTRADA
00A9   178B           00261         BSF INTCON,GIE                  ;hago posible que se puedan hbilitar inerrupciones
00AA   160B           00262         BSF INTCON,INTE                 ;habilito interruocuiones externas "RB0"
00AB   108B           00263         BCF INTCON,INTF                 ;me aseguro que haya interrupciones 
00AC   1283           00264         BCF STATUS,RP0                  ;coloco en 0 el bit RP0 (seleccion banco 0)     
00AD   30FF           00265         MOVLW 0FFh                              ;
00AE   0086           00266         MOVWF PORTB                             ;apago el display
00AF   30FF           00267         MOVLW 0FFh                              ;
00B0   0085           00268         MOVWF PORTA                             ;apago los leds
00B1   30FF           00269         MOVLW 0FFh                              ;
00B2   0087           00270         MOVWF PORTC                             ;apago el teclado       
00B3   01A0           00271         CLRF CONT1                              ;contador 1 en 0
00B4   01A1           00272         CLRF CONT2                              ;contador 2 en 0
00B5   01A2           00273         CLRF CONT3                              ;contador 3 en 0                        
00B6   01A3           00274         CLRF CONT4                              ;contador 4 en 0
00B7   01A4           00275         CLRF CONT5                              ;contador 5 en 0
00B8   01A4           00276         CLRF CONT6                              ;contador 6 en 0
                      00277 
00B9                  00278 BUCLE
00B9   1C05           00279         BTFSS PORTA,0                   ;solo sale si se preciona RESET
00BA   28BC           00280         GOTO EMPIEZA
00BB   28B9           00281         GOTO BUCLE
                      00282 
                      00283 ;===========================================================
                      00284 ;SUBRUTINA EMPIEZA: se encarga de idicar en el dislay que se
                      00285 ;han presionado 0 digitos de enceder el led grabando, para
                      00286 ;indicar que se estan guardando los digios
                      00287 
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00BC                  00288 EMPIEZA
00BC   3080           00289         MOVLW B'10000000'               ;indico en el display que se han
00BD   0086           00290         MOVWF PORTB                             ;presionado 0 digitos
00BE   30FD           00291         MOVLW B'11111101'
00BF   0085           00292         MOVWF PORTA                             ;enciendo el led GRABANDO
00C0   21F3           00293         CALL Retardo_2s                 ;espero un tiempo
                      00294         
                      00295 ;===========================================================
                      00296 ;SUBRUTINA TECLADO: se encarga de idicanos cual fue la tecla
                      00297 ;presionda en el teclado
                      00298         
00C1                  00299 TECLADO
                      00300 
00C1   30FF           00301                 MOVLW 0FFh
00C2   0087           00302                 MOVWF PORTC                     ;descelecciono todas la colunas y filas
                      00303 
00C3   1207           00304                 BCF             PORTC,4         ;coloca en bajo el pin B4 (escaneo culmna 1)
00C4   1C07           00305                 BTFSS   PORTC,0         ;si el pin C0=0 envia el numero 0 de lo contrario salta fila sig
                            uiente
00C5   28E7           00306                 GOTO    UNO
00C6   1C87           00307                 BTFSS   PORTC,1         ;si el pin C1=0 envia el numero 2 de lo contrario salta fila sig
                            uiente
00C7   28EA           00308                 GOTO    DOS
00C8   1D07           00309                 BTFSS   PORTC,2         ;si el pin C2=0 envia el numero 4 de lo contrario salta fila sig
                            uiente
00C9   28ED           00310                 GOTO    TRES
                      00311                 
00CA   1607           00312                 BSF             PORTC,4         ;coloco en alto el pin B4 
00CB   1287           00313                 BCF             PORTC,5         ;coloco en B5 el pin B4 (escaneo columna 2)
00CC   1C07           00314                 BTFSS   PORTC,0         ;repito lo mismo que en la columna 1 
00CD   28F0           00315                 GOTO    CUATRO
00CE   1C87           00316                 BTFSS   PORTC,1
00CF   28F3           00317                 GOTO    CINCO
00D0   1D07           00318                 BTFSS   PORTC,2
00D1   28F6           00319                 GOTO    SEIS
                      00320 
00D2   1687           00321                 BSF             PORTC,5  
00D3   1307           00322                 BCF             PORTC,6
00D4   1C07           00323                 BTFSS   PORTC,0
00D5   28F9           00324                 GOTO    SIETE
00D6   1C87           00325                 BTFSS   PORTC,1
00D7   28FC           00326                 GOTO    OCHO
00D8   1D07           00327                 BTFSS   PORTC,2
00D9   28FF           00328                 GOTO    NUEVE
                      00329         
00DA   1707           00330                 BSF             PORTC,6
00DB   1387           00331                 BCF             PORTC,7
00DC   1C07           00332                 BTFSS   PORTC,0
00DD   28C1           00333                 GOTO    TECLADO
00DE   1C87           00334                 BTFSS   PORTC,1
00DF   28E4           00335                 GOTO    CERO
00E0   1D07           00336                 BTFSS   PORTC,2
00E1   2902           00337                 GOTO    NUMERAL
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00E2   1787           00338                 BSF             PORTC,7
00E3   28C1           00339                 GOTO    TECLADO         ;vuelvo a TECLADO
                      00340 
                      00341 ;===============================================================
                      00342 ;SUBRUTINA GUARDAR: se encarga de guardar el el numero 
                      00343 ;del digito precionado en la LISTA 
                      00344 
00E4   3000           00345 CERO    movlw 00H               
00E5   00C0           00346                 movwf LISTA                     ;guardo el codigo de 0 en LISTA
00E6   2908           00347                 goto COMPROBAR          ;ir a comprobar
                      00348 
00E7   3001           00349 UNO             movlw 01H       
00E8   00C0           00350                 movwf LISTA                     ;guardo el codigo de 1 en LISTA
00E9   2908           00351                 goto COMPROBAR          ;ir a comprobar
                      00352 
00EA   3002           00353 DOS             movlw 02H                       ;repito...
00EB   00C0           00354                 movwf LISTA
00EC   2908           00355                 goto COMPROBAR
                      00356 
00ED   3003           00357 TRES    movlw 03H
00EE   00C0           00358                 movwf LISTA
00EF   2908           00359                 goto COMPROBAR
                      00360 
00F0   3004           00361 CUATRO  movlw 04H
00F1   00C0           00362                 movwf LISTA
00F2   2908           00363                 goto COMPROBAR
                      00364 
00F3   3005           00365 CINCO   movlw 05H
00F4   00C0           00366                 movwf LISTA
00F5   2908           00367                 goto COMPROBAR
                      00368 
00F6   3006           00369 SEIS    movlw 06H
00F7   00C0           00370                 movwf LISTA
00F8   2108           00371                 CALL COMPROBAR
                      00372 
00F9   3007           00373 SIETE   movlw 07H
00FA   00C0           00374                 movwf LISTA
00FB   2908           00375                 goto COMPROBAR
                      00376 
00FC   3008           00377 OCHO    movlw 08H
00FD   00C0           00378                 movwf LISTA
00FE   2908           00379                 goto COMPROBAR
                      00380 
00FF   3009           00381 NUEVE   movlw 09H
0100   00C0           00382                 movwf LISTA
0101   2908           00383                 goto COMPROBAR
                      00384 
0102   0820           00385 NUMERAL MOVF CONT1,w
0103   3C08           00386                 SUBLW 08H
0104   1903           00387                 BTFSC STATUS,Z                  ;SI ES 8 MOSTRAR
0105   2817           00388                 GOTO MOSTRAR
0106   21F3           00389                 call Retardo_2s
0107   28C1           00390                 goto TECLADO
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00391 
                      00392 ;=================================================================
                      00393 ;SUBRUTINA COMPROBAR: se encarga de comprobar cual de los 8
                      00394 ;digitos de la cedula fue el precionado, utilizando el contador 1,
                      00395 ;una vez comprobado, se guardara en la posicion de la lista
                      00396 ;al que pertenece y se mostrara en el display cuantos digitos se han
                      00397 ;presionado
                      00398 
0108                  00399 COMPROBAR
0108   0820           00400         MOVF CONT1,w
0109   3C08           00401         SUBLW 08H                               ;
010A   1903           00402         BTFSC STATUS,Z                  ;si ya se precionaron los 8 digitos
010B   28C1           00403         GOTO TECLADO                    ;esperar a que se precione numeral
                      00404         
010C   0AA0           00405         INCF CONT1,1                    ;sino aumentar contador
                      00406         
010D   0820           00407         MOVF CONT1,w                    
010E   3C01           00408         SUBLW 01H
010F   1903           00409         BTFSC STATUS,Z                  ;si cont1 es 1 ir a guardar en Lista1                   
0110   292E           00410         GOTO UNO1                               ;y mostrar 1 en el display
                      00411 
0111   0820           00412         MOVF CONT1,w                    ;sino
0112   3C02           00413         SUBLW 02H
0113   1903           00414         BTFSC STATUS,Z                  ;si cont1 es 2 ir a guardar en Lista2   
0114   2934           00415         GOTO DOS1                               ;y mostrar 2 en el display 
                      00416 
0115   0820           00417         MOVF CONT1,w                    ;repito...
0116   3C03           00418         SUBLW 03H
0117   1903           00419         BTFSC STATUS,Z                  
0118   293A           00420         GOTO TRES1
                      00421 
0119   0820           00422         MOVF CONT1,w
011A   3C04           00423         SUBLW 04H
011B   1903           00424         BTFSC STATUS,Z                  
011C   2940           00425         GOTO CUATRO1
                      00426 
011D   0820           00427         MOVF CONT1,w
011E   3C05           00428         SUBLW 05H
011F   1903           00429         BTFSC STATUS,Z                  
0120   2946           00430         GOTO CINCO1
                      00431 
0121   0820           00432         MOVF CONT1,w
0122   3C06           00433         SUBLW 06H
0123   1903           00434         BTFSC STATUS,Z                  
0124   294C           00435         GOTO SEIS1
                      00436 
0125   0820           00437         MOVF CONT1,w
0126   3C07           00438         SUBLW 07H
0127   1903           00439         BTFSC STATUS,Z                  
0128   2952           00440         GOTO SIETE1
                      00441 
0129   0820           00442         MOVF CONT1,w
012A   3C08           00443         SUBLW 08H
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012B   1903           00444         BTFSC STATUS,Z                  
012C   2958           00445         GOTO OCHO1
012D   2962           00446         goto ESPERAR
                      00447 
                      00448         
012E                  00449 UNO1
012E   0840           00450         movf LISTA,W            ;recupero el codigo antes guardado
012F   00C1           00451         movwf LISTA1            ;lo guardo en lista1
0130   30F3           00452         movlw B'11110011'       ;muestro que se guardo el digito 1
0131   0086           00453         movwf PORTB                     ;
0132   21F3           00454         call Retardo_2s         ;espero un tiempo
0133   2962           00455         goto ESPERAR            ;espero a que se precione otro digito
                      00456 
0134                  00457 DOS1
0134   0840           00458         movf LISTA,w            ;recupero el codigo antes guardado
0135   00C2           00459         movwf LISTA2            ;lo guardo en lista2
0136   3048           00460         movlw B'01001000'       ;muestro que se guardo el digito 2
0137   0086           00461         movwf PORTB                     ;
0138   21F3           00462         call Retardo_2s         ;espero un tiempo
0139   2962           00463         goto ESPERAR            ;espero a que se precione otro digito
                      00464 
013A                  00465 TRES1
013A   0840           00466         movf LISTA,w            ;repito...
013B   00C3           00467         movwf LISTA3
013C   3060           00468         movlw B'01100000'
013D   0086           00469         movwf PORTB
013E   21F3           00470         call Retardo_2s
013F   2962           00471         goto ESPERAR
                      00472 
0140                  00473 CUATRO1
0140   0840           00474         movf LISTA,w
0141   00C4           00475         movwf LISTA4
0142   3033           00476         movlw B'00110011'
0143   0086           00477         movwf PORTB
0144   21F3           00478         call Retardo_2s
0145   2962           00479         goto ESPERAR
                      00480 
0146                  00481 CINCO1
0146   0840           00482         movf LISTA,w
0147   00C5           00483         movwf LISTA5
0148   3024           00484         movlw B'00100100'
0149   0086           00485         movwf PORTB
014A   21F3           00486         call Retardo_2s
014B   2962           00487         goto ESPERAR
                      00488 
014C                  00489 SEIS1
014C   0840           00490         movf LISTA,w
014D   00C6           00491         movwf LISTA6
014E   3004           00492         movlw B'00000100'
014F   0086           00493         movwf PORTB
0150   21F3           00494         call Retardo_2s
0151   2962           00495         goto ESPERAR
                      00496 
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0152                  00497 SIETE1  
0152   0840           00498         movf LISTA,w
0153   00C7           00499         movwf LISTA7
0154   30F0           00500         movlw B'11110000'
0155   0086           00501         movwf PORTB
0156   21F3           00502         call Retardo_2s
0157   2962           00503         goto ESPERAR
                      00504 
0158                  00505 OCHO1
0158   0840           00506         movf LISTA,w
0159   00C8           00507         movwf LISTA8
015A   3000           00508         movlw B'00000000'
015B   0086           00509         movwf PORTB
015C   21F3           00510         call Retardo_2s
015D   2813           00511         goto GRABADO
                      00512 
015E                  00513 NUEVE1
015E   3020           00514         movlw B'00100000'
015F   0086           00515         movwf PORTB
0160   21F3           00516         call Retardo_2s
0161   28C1           00517         goto TECLADO
                      00518 
                      00519 
                      00520 ;============================================================================
                      00521 ;SUBRUTINA ESPERAR: esta subrutina funciona para que si se deja precionado el  
                      00522 ;boton de una tecla solo se guarde 1 vez el digito y hasta que no se deje de
                      00523 ;presionar no se podra ingresar otro digito
                      00524 
0162                  00525 ESPERAR
0162   0807           00526                 movf PORTC,W
0163   3907           00527                 andlw 07h
0164   3C07           00528                 sublw B'00000111'
0165   1D03           00529                 btfss STATUS,Z                  ;salta un espacio si el resultado no es 0
0166   2962           00530                 goto ESPERAR                    ;
0167   21F3           00531                 call Retardo_2s                 
0168   28C1           00532                 GOTO TECLADO    
                      00533 
                      00534 
                      00535 ;=======================================================================
                      00536 ;SUBRUTINA COMPROBAR2: se encarga de mostrar los digitos antes guardados,
                      00537 ;en el display utilizando el contador 2
                      00538 
0169                  00539 COMPROBAR2
                      00540         
0169   0AA1           00541         INCF CONT2,1            ;indico que se presion asterisco
                      00542 
016A   0821           00543         MOVF CONT2,w            
016B   3C01           00544         SUBLW 01H                       
016C   1903           00545         BTFSC STATUS,Z                  
016D   298A           00546         GOTO DIG1                       ;si cont2 es 1 ir a mostrar el digito 1
                      00547 
016E   0821           00548         MOVF CONT2,w            ;sino ver si cont2 es 2
016F   3C02           00549         SUBLW 02H
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0170   1903           00550         BTFSC STATUS,Z                  
0171   2990           00551         GOTO DIG2                       ;si cont2 es 3 ir a mostrar el digito 3
                      00552 
0172   0821           00553         MOVF CONT2,w            ;repito...
0173   3C03           00554         SUBLW 03H
0174   1903           00555         BTFSC STATUS,Z                  
0175   2996           00556         GOTO DIG3
                      00557 
0176   0821           00558         MOVF CONT2,w
0177   3C04           00559         SUBLW 04H
0178   1903           00560         BTFSC STATUS,Z                  
0179   299C           00561         GOTO DIG4
                      00562 
017A   0821           00563         MOVF CONT2,w
017B   3C05           00564         SUBLW 05H
017C   1903           00565         BTFSC STATUS,Z                  
017D   29A2           00566         GOTO DIG5
                      00567 
017E   0821           00568         MOVF CONT2,w
017F   3C06           00569         SUBLW 06H
0180   1903           00570         BTFSC STATUS,Z                  
0181   29A8           00571         GOTO DIG6
                      00572 
0182   0821           00573         MOVF CONT2,w
0183   3C07           00574         SUBLW 07H
0184   1903           00575         BTFSC STATUS,Z                  
0185   29AE           00576         GOTO DIG7
                      00577 
0186   0821           00578         MOVF CONT2,w
0187   3C08           00579         SUBLW 08H
0188   1903           00580         BTFSC STATUS,Z                  
0189   29B4           00581         goto DIG8
                      00582         
                      00583 
018A                  00584 DIG1    
018A   0841           00585         MOVF LISTA1,w           ;recupero el digito 1
018B   0086           00586         movwf PORTB                     ;lo muetro en el display
018C   21F5           00587         CALL Retardo_1s         ;espero un tiempo               
018D   108B           00588         BCF INTCON,INTF         ;indico que fializo la interrupcion
018E   160B           00589         BSF INTCON,INTE         ;habilito interruocuiones externas "RB0"
018F   0009           00590         RETFIE                          ;espero a que se presione asterisco 
                      00591 
0190                  00592 DIG2
0190   0842           00593         MOVF LISTA2,w           ;recupero el digito 1
0191   0086           00594         movwf PORTB                     ;lo muetro en el display
0192   21F5           00595         CALL Retardo_1s         ;espero un tiempo
0193   108B           00596         BCF INTCON,INTF         ;indico que fializo la interrupcion
0194   160B           00597         BSF INTCON,INTE         ;habilito interruocuiones externas "RB0"
0195   0009           00598         RETFIE                          ;espero a que se presione asterisco
                      00599 
0196                  00600 DIG3
0196   0843           00601         MOVF LISTA3,w           ;repito...
0197   0086           00602         movwf PORTB
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0198   21F5           00603         CALL Retardo_1s                 
0199   108B           00604         BCF INTCON,INTF
019A   160B           00605         BSF INTCON,INTE         
019B   0009           00606         RETFIE
                      00607 
019C                  00608 DIG4
019C   0844           00609         MOVF LISTA4,w
019D   0086           00610         movwf PORTB
019E   21F5           00611         CALL Retardo_1s
019F   108B           00612         BCF INTCON,INTF
01A0   160B           00613         BSF INTCON,INTE         
01A1   0009           00614         RETFIE
                      00615 
01A2                  00616 DIG5
01A2   0845           00617         MOVF LISTA5,w
01A3   0086           00618         movwf PORTB
01A4   21F5           00619         CALL Retardo_1s
01A5   108B           00620         BCF INTCON,INTF
01A6   160B           00621         BSF INTCON,INTE         
01A7   0009           00622         RETFIE
                      00623 
01A8                  00624 DIG6
01A8   0846           00625         MOVF LISTA6,w
01A9   0086           00626         movwf PORTB
01AA   21F5           00627         CALL Retardo_1s
01AB   108B           00628         BCF INTCON,INTF
01AC   160B           00629         BSF INTCON,INTE         
01AD   0009           00630         RETFIE
                      00631 
01AE                  00632 DIG7
01AE   0847           00633         MOVF LISTA7,w
01AF   0086           00634         movwf PORTB
01B0   21F5           00635         CALL Retardo_1s
01B1   108B           00636         BCF INTCON,INTF
01B2   160B           00637         BSF INTCON,INTE         
01B3   0009           00638         RETFIE
                      00639 
01B4                  00640 DIG8
01B4   0848           00641         MOVF LISTA8,w
01B5   0086           00642         movwf PORTB
01B6   21F5           00643         CALL Retardo_1s
01B7   108B           00644         BCF INTCON,INTF                 ;mantengo desabilitadas las interrupciones
01B8   120B           00645         BCF INTCON,INTE                 ;ya que termine de mostrar los digitos
01B9   0009           00646         RETFIE
                      00647 
                      00648 
                      00649 ;====================================================================
                      00650 ;SUBRUTINA FIN: si ya finalice espero un tiempo y reinicio el programa
                      00651 
01BA                  00652 FIN     
01BA   21F3           00653         call Retardo_2s                 ;espero un tiempo
01BB   21F3           00654         call Retardo_2s                 ;espero un tiempo
01BC   21F3           00655         call Retardo_2s                 ;espero un tiempo
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01BD   289F           00656         goto INICIO                             ;reinicio el programa
                      00657 
                      00658         include <RETARDOS.inc>
                      00001 ;**************************** Librer?a "RETARDOS.INC" *********************************
                      00002 ;
                      00003 ;       ===================================================================
                      00004 ;         Del libro "MICROCONTROLADOR PIC16F84. DESARROLLO DE PROYECTOS"
                      00005 ;         E. Palacios, F. Remiro y L. L?pez.
                      00006 ;         Editorial Ra-Ma.  www.ra-ma.es
                      00007 ;       ===================================================================
                      00008 ;
                      00009 ; Librer?a con m?ltiples subrutinas de retardos, desde 4 microsegundos hasta 20 segundos. 
                      00010 ; Adem?s se pueden implementar otras subrutinas muy f?cilmente.
                      00011 ;
                      00012 ; Se han calculado para un sistema microcontrolador con un PIC trabajando con un cristal
                      00013 ; de cuarzo a 4 MHz. Como cada ciclo m?quina son 4 ciclos de reloj, resulta que cada
                      00014 ; ciclo m?quina tarda 4 x 1/4MHz = 1 ?s.
                      00015 ;
                      00016 ; En los comentarios, "cm" significa "ciclos m?quina".
                      00017 ;
                      00018 ; ZONA DE DATOS *********************************************************************
                      00019 
                      00020         CBLOCK
  0000000C            00021         R_ContA                         ; Contadores para los retardos.
  0000000D            00022         R_ContB
  0000000E            00023         R_ContC
                      00024         ENDC
                      00025 ;
                      00026 ; RETARDOS de 4 hasta 10 microsegundos ---------------------------------------------------
                      00027 ;
                      00028 ; A continuaci?n retardos peque?os teniendo en cuenta que para una frecuencia de 4 MHZ,
                      00029 ; la llamada a subrutina "call" tarda 2 ciclos m?quina, el retorno de subrutina
                      00030 ; "return" toma otros 2 ciclos m?quina y cada instrucci?n "nop" tarda 1 ciclo m?quina.
                      00031 ;
01BE                  00032 Retardo_10micros                                ; La llamada "call" aporta 2 ciclos m?quina.
01BE   0000           00033         nop                             ; Aporta 1 ciclo m?quina.
01BF   0000           00034         nop                             ; Aporta 1 ciclo m?quina.
01C0   0000           00035         nop                             ; Aporta 1 ciclo m?quina.
01C1   0000           00036         nop                             ; Aporta 1 ciclo m?quina.
01C2   0000           00037         nop                             ; Aporta 1 ciclo m?quina.
01C3                  00038 Retardo_5micros                         ; La llamada "call" aporta 2 ciclos m?quina.
01C3   0000           00039         nop                             ; Aporta 1 ciclo m?quina.
01C4                  00040 Retardo_4micros                         ; La llamada "call" aporta 2 ciclos m?quina.
01C4   0008           00041         return                          ; El salto del retorno aporta 2 ciclos m?quina.
                      00042 ;
                      00043 ; RETARDOS de 20 hasta 500 microsegundos ------------------------------------------------
                      00044 ;
01C5                  00045 Retardo_500micros                               ; La llamada "call" aporta 2 ciclos m?quina.
01C5   0000           00046         nop                             ; Aporta 1 ciclo m?quina.
01C6   30A4           00047         movlw   d'164'                  ; Aporta 1 ciclo m?quina. Este es el valor de "K".
01C7   29D1           00048         goto    RetardoMicros           ; Aporta 2 ciclos m?quina.
01C8                  00049 Retardo_200micros                               ; La llamada "call" aporta 2 ciclos m?quina.
01C8   0000           00050         nop                             ; Aporta 1 ciclo m?quina.
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01C9   3040           00051         movlw   d'64'                   ; Aporta 1 ciclo m?quina. Este es el valor de "K".
01CA   29D1           00052         goto    RetardoMicros           ; Aporta 2 ciclos m?quina.
01CB                  00053 Retardo_100micros                               ; La llamada "call" aporta 2 ciclos m?quina.
01CB   301F           00054         movlw   d'31'                   ; Aporta 1 ciclo m?quina. Este es el valor de "K".
01CC   29D1           00055         goto    RetardoMicros           ; Aporta 2 ciclos m?quina.
01CD                  00056 Retardo_50micros                                ; La llamada "call" aporta 2 ciclos m?quina.
01CD   0000           00057         nop                             ; Aporta 1 ciclo m?quina.
01CE   300E           00058         movlw   d'14'                   ; Aporta 1 ciclo m?quina. Este es el valor de "K".
01CF   29D1           00059         goto    RetardoMicros           ; Aporta 2 ciclos m?quina.
01D0                  00060 Retardo_20micros                                ; La llamada "call" aporta 2 ciclos m?quina.
01D0   3005           00061         movlw   d'5'                    ; Aporta 1 ciclo m?quina. Este es el valor de "K".
                      00062 ;
                      00063 ; El pr?ximo bloque "RetardoMicros" tarda:
                      00064 ; 1 + (K-1) + 2 + (K-1)x2 + 2 = (2 + 3K) ciclos m?quina.
                      00065 ;
01D1                  00066 RetardoMicros
01D1   008C           00067         movwf   R_ContA                 ; Aporta 1 ciclo m?quina.
01D2                  00068 Rmicros_Bucle
01D2   0B8C           00069         decfsz  R_ContA,F               ; (K-1)x1 cm (cuando no salta) + 2 cm (al saltar).
01D3   29D2           00070         goto    Rmicros_Bucle           ; Aporta (K-1)x2 ciclos m?quina.
01D4   0008           00071         return                          ; El salto del retorno aporta 2 ciclos m?quina.
                      00072 ;
                      00073 ;En total estas subrutinas tardan:
                      00074 ; - Retardo_500micros:  2 + 1 + 1 + 2 + (2 + 3K) = 500 cm = 500 ?s. (para K=164 y 4 MHz).
                      00075 ; - Retardo_200micros:  2 + 1 + 1 + 2 + (2 + 3K) = 200 cm = 200 ?s. (para K= 64 y 4 MHz).
                      00076 ; - Retardo_100micros:  2     + 1 + 2 + (2 + 3K) = 100 cm = 100 ?s. (para K= 31 y 4 MHz).
                      00077 ; - Retardo_50micros :  2 + 1 + 1 + 2 + (2 + 3K) =  50 cm =  50 ?s. (para K= 14 y 4 MHz).
                      00078 ; - Retardo_20micros :  2     + 1     + (2 + 3K) =  20 cm =  20 ?s. (para K=  5 y 4 MHz).
                      00079 ;
                      00080 ; RETARDOS de 1 ms hasta 200 ms. --------------------------------------------------------
                      00081 ;
01D5                  00082 Retardo_200ms                           ; La llamada "call" aporta 2 ciclos m?quina.
01D5   30C8           00083         movlw   d'200'                  ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01D6   29E4           00084         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01D7                  00085 Retardo_100ms                           ; La llamada "call" aporta 2 ciclos m?quina.
01D7   3064           00086         movlw   d'100'                  ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01D8   29E4           00087         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01D9                  00088 Retardo_50ms                            ; La llamada "call" aporta 2 ciclos m?quina.
01D9   3032           00089         movlw   d'50'                   ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01DA   29E4           00090         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01DB                  00091 Retardo_20ms                            ; La llamada "call" aporta 2 ciclos m?quina.
01DB   3014           00092         movlw   d'20'                   ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01DC   29E4           00093         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01DD                  00094 Retardo_10ms                            ; La llamada "call" aporta 2 ciclos m?quina.
01DD   300A           00095         movlw   d'10'                   ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01DE   29E4           00096         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01DF                  00097 Retardo_5ms                             ; La llamada "call" aporta 2 ciclos m?quina.
01DF   3005           00098         movlw   d'5'                    ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01E0   29E4           00099         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01E1                  00100 Retardo_2ms                             ; La llamada "call" aporta 2 ciclos m?quina.
01E1   3002           00101         movlw   d'2'                    ; Aporta 1 ciclo m?quina. Este es el valor de "M".
01E2   29E4           00102         goto    Retardos_ms             ; Aporta 2 ciclos m?quina.
01E3                  00103 Retardo_1ms                             ; La llamada "call" aporta 2 ciclos m?quina.
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01E3   3001           00104         movlw   d'1'                    ; Aporta 1 ciclo m?quina. Este es el valor de "M".
                      00105 ;
                      00106 ; El pr?ximo bloque "Retardos_ms" tarda:
                      00107 ; 1 + M + M + KxM + (K-1)xM + Mx2 + (K-1)Mx2 + (M-1) + 2 + (M-1)x2 + 2 =
                      00108 ; = (2 + 4M + 4KM) ciclos m?quina. Para K=249 y M=1 supone 1002 ciclos m?quina
                      00109 ; que a 4 MHz son 1002 ?s = 1 ms.
                      00110 ;
01E4                  00111 Retardos_ms
01E4   008D           00112         movwf   R_ContB                 ; Aporta 1 ciclo m?quina.
01E5                  00113 R1ms_BucleExterno
01E5   30F9           00114         movlw   d'249'                  ; Aporta Mx1 ciclos m?quina. Este es el valor de "K".
01E6   008C           00115         movwf   R_ContA                 ; Aporta Mx1 ciclos m?quina.
01E7                  00116 R1ms_BucleInterno
01E7   0000           00117         nop                             ; Aporta KxMx1 ciclos m?quina.
01E8   0B8C           00118         decfsz  R_ContA,F               ; (K-1)xMx1 cm (cuando no salta) + Mx2 cm (al saltar).
01E9   29E7           00119         goto    R1ms_BucleInterno               ; Aporta (K-1)xMx2 ciclos m?quina.
01EA   0B8D           00120         decfsz  R_ContB,F               ; (M-1)x1 cm (cuando no salta) + 2 cm (al saltar).
01EB   29E5           00121         goto    R1ms_BucleExterno       ; Aporta (M-1)x2 ciclos m?quina.
01EC   0008           00122         return                          ; El salto del retorno aporta 2 ciclos m?quina.
                      00123 ;
                      00124 ;En total estas subrutinas tardan:
                      00125 ; - Retardo_200ms:      2 + 1 + 2 + (2 + 4M + 4KM) = 200007 cm = 200 ms. (M=200 y K=249).
                      00126 ; - Retardo_100ms:      2 + 1 + 2 + (2 + 4M + 4KM) = 100007 cm = 100 ms. (M=100 y K=249).
                      00127 ; - Retardo_50ms :      2 + 1 + 2 + (2 + 4M + 4KM) =  50007 cm =  50 ms. (M= 50 y K=249).
                      00128 ; - Retardo_20ms :      2 + 1 + 2 + (2 + 4M + 4KM) =  20007 cm =  20 ms. (M= 20 y K=249).
                      00129 ; - Retardo_10ms :      2 + 1 + 2 + (2 + 4M + 4KM) =  10007 cm =  10 ms. (M= 10 y K=249).
                      00130 ; - Retardo_5ms  :      2 + 1 + 2 + (2 + 4M + 4KM) =   5007 cm =   5 ms. (M=  5 y K=249).
                      00131 ; - Retardo_2ms  :      2 + 1 + 2 + (2 + 4M + 4KM) =   2007 cm =   2 ms. (M=  2 y K=249).
                      00132 ; - Retardo_1ms  :      2 + 1     + (2 + 4M + 4KM) =   1005 cm =   1 ms. (M=  1 y K=249).
                      00133 ;
                      00134 ; RETARDOS de 0.5 hasta 20 segundos ---------------------------------------------------
                      00135 ;
01ED                  00136 Retardo_20s                             ; La llamada "call" aporta 2 ciclos m?quina.
01ED   30C8           00137         movlw   d'200'                  ; Aporta 1 ciclo m?quina. Este es el valor de "N".
01EE   29F8           00138         goto    Retardo_1Decima         ; Aporta 2 ciclos m?quina.
01EF                  00139 Retardo_10s                             ; La llamada "call" aporta 2 ciclos m?quina.
01EF   3064           00140         movlw   d'100'                  ; Aporta 1 ciclo m?quina. Este es el valor de "N".
01F0   29F8           00141         goto    Retardo_1Decima         ; Aporta 2 ciclos m?quina.
01F1                  00142 Retardo_5s                              ; La llamada "call" aporta 2 ciclos m?quina.
01F1   3032           00143         movlw   d'50'                   ; Aporta 1 ciclo m?quina. Este es el valor de "N".
01F2   29F8           00144         goto    Retardo_1Decima         ; Aporta 2 ciclos m?quina.
01F3                  00145 Retardo_2s                              ; La llamada "call" aporta 2 ciclos m?quina.
01F3   3014           00146         movlw   d'20'                   ; Aporta 1 ciclo m?quina. Este es el valor de "N".
01F4   29F8           00147         goto    Retardo_1Decima         ; Aporta 2 ciclos m?quina.
01F5                  00148 Retardo_1s                              ; La llamada "call" aporta 2 ciclos m?quina.
01F5   300A           00149         movlw   d'10'                   ; Aporta 1 ciclo m?quina. Este es el valor de "N".
01F6   29F8           00150         goto    Retardo_1Decima         ; Aporta 2 ciclos m?quina.
01F7                  00151 Retardo_500ms                           ; La llamada "call" aporta 2 ciclos m?quina.
01F7   3005           00152         movlw   d'5'                    ; Aporta 1 ciclo m?quina. Este es el valor de "N".
                      00153 ;
                      00154 ; El pr?ximo bloque "Retardo_1Decima" tarda:
                      00155 ; 1 + N + N + MxN + MxN + KxMxN + (K-1)xMxN + MxNx2 + (K-1)xMxNx2 +
                      00156 ;   + (M-1)xN + Nx2 + (M-1)xNx2 + (N-1) + 2 + (N-1)x2 + 2 =
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00157 ; = (2 + 4M + 4MN + 4KM) ciclos m?quina. Para K=249, M=100 y N=1 supone 100011
                      00158 ; ciclos m?quina que a 4 MHz son 100011 ?s = 100 ms = 0,1 s = 1 d?cima de segundo.
                      00159 ;
01F8                  00160 Retardo_1Decima
01F8   008E           00161         movwf   R_ContC                 ; Aporta 1 ciclo m?quina.
01F9                  00162 R1Decima_BucleExterno2
01F9   3064           00163         movlw   d'100'                  ; Aporta Nx1 ciclos m?quina. Este es el valor de "M".
01FA   008D           00164         movwf   R_ContB                 ; Aporta Nx1 ciclos m?quina.
01FB                  00165 R1Decima_BucleExterno
01FB   30F9           00166         movlw   d'249'                  ; Aporta MxNx1 ciclos m?quina. Este es el valor de "K".
01FC   008C           00167         movwf   R_ContA                 ; Aporta MxNx1 ciclos m?quina.
01FD                  00168 R1Decima_BucleInterno          
01FD   0000           00169         nop                             ; Aporta KxMxNx1 ciclos m?quina.
01FE   0B8C           00170         decfsz  R_ContA,F               ; (K-1)xMxNx1 cm (si no salta) + MxNx2 cm (al saltar).
01FF   29FD           00171         goto    R1Decima_BucleInterno   ; Aporta (K-1)xMxNx2 ciclos m?quina.
0200   0B8D           00172         decfsz  R_ContB,F               ; (M-1)xNx1 cm (cuando no salta) + Nx2 cm (al saltar).
0201   29FB           00173         goto    R1Decima_BucleExterno   ; Aporta (M-1)xNx2 ciclos m?quina.
0202   0B8E           00174         decfsz  R_ContC,F               ; (N-1)x1 cm (cuando no salta) + 2 cm (al saltar).
0203   29F9           00175         goto    R1Decima_BucleExterno2  ; Aporta (N-1)x2 ciclos m?quina.
0204   0008           00176         return                          ; El salto del retorno aporta 2 ciclos m?quina.
                      00177 ;
                      00178 ;En total estas subrutinas tardan:
                      00179 ; - Retardo_20s:        2 + 1 + 2 + (2 + 4N + 4MN + 4KMN) = 20000807 cm = 20 s.
                      00180 ;                       (N=200, M=100 y K=249).
                      00181 ; - Retardo_10s:        2 + 1 + 2 + (2 + 4N + 4MN + 4KMN) = 10000407 cm = 10 s.
                      00182 ;                       (N=100, M=100 y K=249).
                      00183 ; - Retardo_5s:         2 + 1 + 2 + (2 + 4N + 4MN + 4KMN) =  5000207 cm =  5 s.
                      00184 ;                       (N= 50, M=100 y K=249).
                      00185 ; - Retardo_2s:         2 + 1 + 2 + (2 + 4N + 4MN + 4KMN) =  2000087 cm =  2 s.
                      00186 ;                       (N= 20, M=100 y K=249).
                      00187 ; - Retardo_1s:         2 + 1 + 2 + (2 + 4N + 4MN + 4KMN) =  1000047 cm =  1 s.
                      00188 ;                       (N= 10, M=100 y K=249).
                      00189 ; - Retardo_500ms:      2 + 1     + (2 + 4N + 4MN + 4KMN) =   500025 cm = 0,5 s.
                      00190 ;                       (N=  5, M=100 y K=249).
                      00191 
                      00192 ;       ===================================================================
                      00193 ;         Del libro "MICROCONTROLADOR PIC16F84. DESARROLLO DE PROYECTOS"
                      00194 ;         E. Palacios, F. Remiro y L. L?pez.
                      00195 ;         Editorial Ra-Ma.  www.ra-ma.es
                      00196 ;       =====================================================
                      00659 
                      00660         END
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACTIVO                            00000021
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
BUCLE                             000000B9
BUCLE1                            00000033
BUCLE2                            00000037
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CERO                              000000E4
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CINCO                             000000F3
CINCO1                            00000146
CIS                               00000003
CKE                               00000006
CKP                               00000004
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMIE                              00000006
CMIF                              00000006
COD0                              00000081
COD1                              00000084
COD2                              00000087
COD3                              0000008A
COD4                              0000008D
COD5                              00000090
COD6                              00000093
COD7                              00000096
COD8                              00000099
COD9                              0000009C
COMPROBAR                         00000108
COMPROBAR2                        00000169
CONT1                             00000020
CONT2                             00000021
CONT3                             00000022
CONT4                             00000023
CONT5                             00000024
CONT6                             00000024
CONVERTIR                         0000004C
CREN                              00000004
CSRC                              00000007
CUATRO                            000000F0
CUATRO1                           00000140
CUENTA                            00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DIG1                              0000018A
DIG2                              00000190
DIG3                              00000196
DIG4                              0000019C
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

DIG5                              000001A2
DIG6                              000001A8
DIG7                              000001AE
DIG8                              000001B4
DOS                               000000EA
DOS1                              00000134
D_A                               00000005
D_NOT_A                           00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
EMPIEZA                           000000BC
ESPERAR                           00000162
F                                 00000001
FERR                              00000002
FIN                               000001BA
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
GRABADO                           00000013
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
INDF                              00000000
INICIO                            0000009F
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LISTA                             00000040
LISTA1                            00000041
LISTA2                            00000042
LISTA3                            00000043
LISTA4                            00000044
LISTA5                            00000045
LISTA6                            00000046
LISTA7                            00000047
LISTA8                            00000048
LISTO                             00000005
MOSTRAR                           00000017
NOHACERNADA                       0000004A
NOT_A                             00000005
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NUEVE                             000000FF
NUEVE1                            0000015E
NUMERAL                           00000102
OCHO                              000000FC
OCHO1                             00000158
OERR                              00000001
OPTION_REG                        00000081
ORDENADOS                         0000003E
ORDENAR                           00000031
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
R                                 00000002
R1Decima_BucleExterno             000001FB
R1Decima_BucleExterno2            000001F9
R1Decima_BucleInterno             000001FD
R1ms_BucleExterno                 000001E5
R1ms_BucleInterno                 000001E7
RA0                               00000000
RA1                               00000001
RA2                               00000002
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 22


SYMBOL TABLE
  LABEL                             VALUE 

RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RESET                             00000000
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_ContA                           0000000C
R_ContB                           0000000D
R_ContC                           0000000E
R_NOT_W                           00000002
R_W                               00000002
RetardoMicros                     000001D1
Retardo_100micros                 000001CB
Retardo_100ms                     000001D7
Retardo_10micros                  000001BE
Retardo_10ms                      000001DD
Retardo_10s                       000001EF
Retardo_1Decima                   000001F8
Retardo_1ms                       000001E3
Retardo_1s                        000001F5
Retardo_200micros                 000001C8
Retardo_200ms                     000001D5
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 23


SYMBOL TABLE
  LABEL                             VALUE 

Retardo_20micros                  000001D0
Retardo_20ms                      000001DB
Retardo_20s                       000001ED
Retardo_2ms                       000001E1
Retardo_2s                        000001F3
Retardo_4micros                   000001C4
Retardo_500micros                 000001C5
Retardo_500ms                     000001F7
Retardo_50micros                  000001CD
Retardo_50ms                      000001D9
Retardo_5micros                   000001C3
Retardo_5ms                       000001DF
Retardo_5s                        000001F1
Retardos_ms                       000001E4
Rmicros_Bucle                     000001D2
S                                 00000003
SEIS                              000000F6
SEIS1                             0000014C
SEN                               00000000
SIETE                             000000F9
SIETE1                            00000152
SIETESEG                          00000057
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

T2CON                             00000012
TECLADO                           000000C1
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRES                              000000ED
TRES1                             0000013A
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
UNO                               000000E7
UNO1                              0000012E
VOLVER                            00000010
VOLVER3                           00000051
VOLVER4                           0000004F
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_CP_ON                            00001FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_1FOURTH                      00003BFF
_WRT_256                          00003DFF
_WRT_HALF                         000039FF
_WRT_OFF                          00003FFF
_XT_OSC                           00003FFD
MPASM  5.51                        MAYORA.ASM   8-6-2022  17:36:44         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

__16F873A                         00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXX----------- ---------------- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   514
Program Memory Words Free:  3582


Errors   :     0
Warnings :    19 reported,     0 suppressed
Messages :     3 reported,     0 suppressed

